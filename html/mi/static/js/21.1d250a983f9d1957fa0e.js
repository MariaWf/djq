webpackJsonp([21,49,62,77],{"2hCC":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:[e.containerClass]},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"权限名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.handleFilter(t)}},model:{value:e.listQuery.keyword,callback:function(t){e.listQuery.keyword=t},expression:"listQuery.keyword"}}),e._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),e.isMain?[e.checkPermission(e.permissionConstant.role_c)?i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:e.handleCreate}},[e._v("添加")]):e._e(),e._v(" "),e.checkPermission(e.permissionConstant.role_d)?i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"edit"},on:{click:e.handleBatchDelete}},[e._v("批量删除")]):e._e()]:e._e()],2),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.crpRoles.records,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[e.isMain?i("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),i("el-table-column",{attrs:{"min-width":"110",align:"center",label:"角色名"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{class:{"link-type":e.isMain},on:{click:function(i){e.handleUpdate(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.description))])]}}])}),e._v(" "),e.isMain?[e.checkPermission(e.permissionConstant.amdin_d)?i("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(i){e.handleModifyStatus(t.row,!0)}}},[e._v("删除")])]}}])}):e._e()]:[i("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.has(t.row.id)?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){e.cancelCheck(t.row)}}},[e._v("取消选中")]):i("el-button",{attrs:{size:"small"},on:{click:function(i){e.check(t.row)}}},[e._v("选中")])]}}])})]],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":e.listQuery.currentPage,"page-sizes":[10,20,30,50],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.crpRoles.pageInfo.totalRow},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.listQuery.currentPage=t}}})],1),e._v(" "),i("Role-Detail",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,"before-close":e.cancel,"dialog-status":e.dialogStatus,detail:e.temp,"dialog-form-visible":e.dialogFormVisible},on:{submit:function(t){e.submit()},cancel:function(t){e.cancel()}}})],1)},staticRenderFns:[]}},"4aCt":function(e,t,i){"use strict";t.a={jpg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",psd:"image/photoshop"}},"4zLm":function(e,t,i){"use strict";t.a=function(e,t){e=e.split(",")[1],e=window.atob(e);for(var i=new Uint8Array(e.length),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return new Blob([i],{type:t})}},BIbF:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"vue-image-crop-upload"},[i("div",{staticClass:"vicp-wrap"},[i("div",{staticClass:"vicp-close",on:{click:e.off}},[i("i",{staticClass:"vicp-icon4"})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.step,expression:"step == 1"}],staticClass:"vicp-step1"},[i("div",{staticClass:"vicp-drop-area",on:{dragleave:e.preventDefault,dragover:e.preventDefault,dragenter:e.preventDefault,click:e.handleClick,drop:e.handleChange}},[i("i",{directives:[{name:"show",rawName:"v-show",value:1!=e.loading,expression:"loading != 1"}],staticClass:"vicp-icon1"},[i("i",{staticClass:"vicp-icon1-arrow"}),e._v(" "),i("i",{staticClass:"vicp-icon1-body"}),e._v(" "),i("i",{staticClass:"vicp-icon1-bottom"})]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:1!==e.loading,expression:"loading !== 1"}],staticClass:"vicp-hint"},[e._v(e._s(e.lang.hint))]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.isSupported,expression:"!isSupported"}],staticClass:"vicp-no-supported-hint"},[e._v(e._s(e.lang.noSupported))]),e._v(" "),1==e.step?i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileinput",attrs:{type:"file"},on:{change:e.handleChange}}):e._e()]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"vicp-error"},[i("i",{staticClass:"vicp-icon2"}),e._v(" "+e._s(e.errorMsg)+"\n      ")]),e._v(" "),i("div",{staticClass:"vicp-operate"},[i("a",{on:{click:e.off,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.off))])])]),e._v(" "),2==e.step?i("div",{staticClass:"vicp-step2"},[i("div",{staticClass:"vicp-crop"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-left"},[i("div",{staticClass:"vicp-img-container"},[i("img",{ref:"img",staticClass:"vicp-img",style:e.sourceImgStyle,attrs:{src:e.sourceImgUrl,draggable:"false"},on:{drag:e.preventDefault,dragstart:e.preventDefault,dragend:e.preventDefault,dragleave:e.preventDefault,dragover:e.preventDefault,dragenter:e.preventDefault,drop:e.preventDefault,touchstart:e.imgStartMove,touchmove:e.imgMove,touchend:e.createImg,touchcancel:e.createImg,mousedown:e.imgStartMove,mousemove:e.imgMove,mouseup:e.createImg,mouseout:e.createImg}}),e._v(" "),i("div",{staticClass:"vicp-img-shade vicp-img-shade-1",style:e.sourceImgShadeStyle}),e._v(" "),i("div",{staticClass:"vicp-img-shade vicp-img-shade-2",style:e.sourceImgShadeStyle})]),e._v(" "),i("div",{staticClass:"vicp-range"},[i("input",{attrs:{type:"range",step:"1",min:"0",max:"100"},domProps:{value:e.scale.range},on:{input:e.zoomChange}}),e._v(" "),i("i",{staticClass:"vicp-icon5",on:{mousedown:e.startZoomSub,mouseout:e.endZoomSub,mouseup:e.endZoomSub}}),e._v(" "),i("i",{staticClass:"vicp-icon6",on:{mousedown:e.startZoomAdd,mouseout:e.endZoomAdd,mouseup:e.endZoomAdd}})])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"vicp-crop-right"},[i("div",{staticClass:"vicp-preview"},[i("div",{staticClass:"vicp-preview-item"},[i("img",{style:e.previewStyle,attrs:{src:e.createImgUrl}}),e._v(" "),i("span",[e._v(e._s(e.lang.preview))])]),e._v(" "),e.noCircle?e._e():i("div",{staticClass:"vicp-preview-item"},[i("img",{style:e.previewStyle,attrs:{src:e.createImgUrl}}),e._v(" "),i("span",[e._v(e._s(e.lang.preview))])])])])]),e._v(" "),i("div",{staticClass:"vicp-operate"},[i("a",{on:{click:function(t){e.setStep(1)},mousedown:e.ripple}},[e._v(e._s(e.lang.btn.back))]),e._v(" "),i("a",{staticClass:"vicp-operate-btn",on:{click:e.prepareUpload,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.save))])])]):e._e(),e._v(" "),3==e.step?i("div",{staticClass:"vicp-step3"},[i("div",{staticClass:"vicp-upload"},[i("span",{directives:[{name:"show",rawName:"v-show",value:1===e.loading,expression:"loading === 1"}],staticClass:"vicp-loading"},[e._v(e._s(e.lang.loading))]),e._v(" "),i("div",{staticClass:"vicp-progress-wrap"},[i("span",{directives:[{name:"show",rawName:"v-show",value:1===e.loading,expression:"loading === 1"}],staticClass:"vicp-progress",style:e.progressStyle})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"vicp-error"},[i("i",{staticClass:"vicp-icon2"}),e._v(" "+e._s(e.errorMsg)+"\n        ")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.loading,expression:"loading === 2"}],staticClass:"vicp-success"},[i("i",{staticClass:"vicp-icon3"}),e._v(" "+e._s(e.lang.success)+"\n        ")])]),e._v(" "),i("div",{staticClass:"vicp-operate"},[i("a",{on:{click:function(t){e.setStep(2)},mousedown:e.ripple}},[e._v(e._s(e.lang.btn.back))]),e._v(" "),i("a",{on:{click:e.off,mousedown:e.ripple}},[e._v(e._s(e.lang.btn.close))])])]):e._e(),e._v(" "),i("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",attrs:{width:e.width,height:e.height}})])])},staticRenderFns:[]}},BxEw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),o=i.n(a),r=i("NYxO");t.default={props:{containerClass:{type:String,default:""},permissions:{type:Array,default:function(){return[]}}},name:"crp_permission",data:function(){return{listLoading:!0,detailLoading:!0,tableKey:0}},computed:o()({},i.i(r.a)(["crpPermissions"])),created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,this.$store.dispatch("GetAllPermissions").then(function(){e.listLoading=!1},function(){})},handleFilter:function(){this.getList()},handleDelRelation:function(e){var t=this;t.$store.dispatch("DelPermissions").then(function(){t.temp.permissionList.splice(t.temp.permissionList.indexOf(e),1)})},check:function(e){this.$emit("check",e)},cancelCheck:function(e){this.$emit("cancel-check",e)},has:function(e){return this.permissions.some(function(t){return t.code===e})}}}},E4LH:function(e,t,i){"use strict";function a(e){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(e)}function o(e,t,i){""===t||/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/.test(t)?i():i(new Error("手机号码不合法"))}function r(e){return function(t,i,a){i&&!/^[\d]+$/.test(i)?a(new Error(e)):a()}}function s(e){return function(t,i,a){i&&!/^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$/.test(i)?a(new Error(e)):a()}}function n(e,t,i){t>999?i("优先权重最大999"):i()}t.e=a,t.a=o,t.c=r,t.d=s,t.b=n},IYdm:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"detailForm",staticClass:"small-space",staticStyle:{"margin-left":"50px"},attrs:{model:e.detail,rules:e.detailRules,"label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"管理员名称",prop:"name"}},[i("el-input",{attrs:{disabled:"info"===e.dialogStatus},model:{value:e.detail.name,callback:function(t){e.detail.name=t},expression:"detail.name"}})],1),e._v(" "),"create"===e.dialogStatus?[i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{type:"password"},model:{value:e.detail.password,callback:function(t){e.detail.password=t},expression:"detail.password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"确认密码",prop:"second_password"}},[i("el-input",{attrs:{type:"password"},model:{value:e.detail.second_password,callback:function(t){e.detail.second_password=t},expression:"detail.second_password"}})],1)]:[i("el-form-item",{attrs:{label:"密码"}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.showPass}},[e._v("修改密码")])],1)],e._v(" "),i("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[i("el-input",{model:{value:e.detail.mobile,callback:function(t){e.detail.mobile=t},expression:"detail.mobile"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{staticClass:"filter-item",attrs:{disabled:"info"===e.dialogStatus,placeholder:"状态"},model:{value:e.detail.locked,callback:function(t){e.detail.locked=t},expression:"detail.locked"}},e._l(e.statusOptions,function(e){return i("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"关联角色"}},[0===e.detail.roleList.length?i("span",[e._v("无关联角色")]):e._l(e.detail.roleList,function(t){return i("el-tooltip",{key:t.id,attrs:{content:t.description,placement:"top"}},[i("el-tag",{attrs:{type:"success",closable:"create"==e.dialogStatus||e.checkPermission(e.permissionConstant.admin_u)&&"update"===e.dialogStatus,"close-transition":!1},on:{close:function(i){e.handleDelRelation(t)}}},[e._v("\n          "+e._s(t.name)+"\n        ")])],1)})],2),e._v(" "),"create"==e.dialogStatus||e.checkPermission(e.permissionConstant.admin_u)&&"update"===e.dialogStatus?i("el-form-item",{attrs:{label:"选择关联角色"}},[i("Permissions",{attrs:{"is-main":e.isMain,roles:e.detail.roleList},on:{check:e.handleAddRelation,"cancel-check":e.handleDelRelation}})],1):e._e()],2),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"}},[e.cancelVisible?i("el-button",{on:{click:e.cancel}},[e._v("取 消")]):e._e(),e._v(" "),"create"===e.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("确 定")]):e._e(),e._v(" "),"update"===e.dialogStatus&&e.checkPermission(e.permissionConstant.admin_u)?[i("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])]:e._e(),e._v(" "),"info"===e.dialogStatus?[i("el-button",{attrs:{type:"primary"},on:{click:e.updateSelf}},[e._v("确 定")])]:e._e()],2),e._v(" "),i("el-dialog",{attrs:{modal:!1,title:"修改密码",visible:e.passVisible,"before-close":e.closePass,size:"tiny"}},[i("el-form",{ref:"passForm",staticClass:"small-space",attrs:{model:e.pass,rules:e.passRules,"label-position":"left","label-width":"100px"}},[i("el-form-item",{staticStyle:{"margin-bottom":"30px"},attrs:{label:"密码",prop:"val1"}},[i("el-input",{attrs:{type:"password"},model:{value:e.pass.val1,callback:function(t){e.pass.val1=t},expression:"pass.val1"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"确认密码",prop:"val2"}},[i("el-input",{attrs:{type:"password"},model:{value:e.pass.val2,callback:function(t){e.pass.val2=t},expression:"pass.val2"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:e.closePass}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.updatePass}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},MhD1:function(e,t,i){var a=i("VU/8")(i("uq7Z"),i("e5Cf"),null,null,null);e.exports=a.exports},MjDU:function(e,t,i){var a=i("VU/8")(i("UL93"),i("IYdm"),null,null,null);e.exports=a.exports},RpGP:function(e,t,i){var a=i("VU/8")(i("BxEw"),i("nUWv"),null,null,null);e.exports=a.exports},UL93:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),o=i.n(a),r=i("//Fk"),s=i.n(r),n=i("zeOH"),p=i.n(n),c=i("a+Xf"),l=i.n(c),u=i("E4LH");t.default={components:{Permissions:p.a,Upload:l.a},props:{cancelVisible:{type:Boolean,default:!0},dialogStatus:{type:String,default:"create"},dialogFormVisible:{type:Boolean,default:!1},statusOptions:{type:Array,default:function(){return[]}},detail:{type:Object,default:function(){return{id:"",name:"",mobile:"",password:"",second_password:"",locked:!1,permissionList:[],roleList:[]}}}},data:function(){var e=this,t=function(e,t,i){""===t?i(new Error("管理员名称不能为空")):t.length<3||t.length>32?i(new Error("管理员名称长度3到32位")):/^[a-zA-Z_][a-zA-Z0-9_]{3,31}$/.test(t)?i():i(new Error("管理员名称开头必须是字母或下划线，其它为数字、字母和下划线组成"))},i=function(t,i,a){return function(o,r,s){""===r?s(new Error("请输入密码")):r.length<6||r.length>32?s(new Error("密码长度6到32位")):/^[a-zA-Z0-9!@#\\$%\\^&\\*\\(\\)]{6,32}$/.test(r)?(""!==e[i][a]&&e.$refs[t].validateField(a),s()):s(new Error("密码只能由大小写字母、数字和特殊字符(!@#$%^&*())组成"))}},a=function(t,i){return function(a,o,r){""===o?r(new Error("请再次输入密码")):o!==e[t][i]?r(new Error("两次输入密码不一致")):o.length<6||o.length>32?r(new Error("密码长度6到32位")):/^[a-zA-Z0-9!@#\\$%\\^&\\*\\(\\)]{6,32}$/.test(o)?r():r(new Error("密码只能由大小写字母、数字和特殊字符(!@#$%^&*())组成"))}};return{publicKey:"",passVisible:!1,isMain:!1,pass:{val1:"",val2:""},passRules:{val1:[{required:!0,validator:i("passForm","pass","val2"),trigger:"blur"}],val2:[{required:!0,validator:a("pass","val1"),trigger:"blur"}]},detailRules:{name:[{validator:t,trigger:"blur"}],mobile:[{required:!1,validator:u.a,message:"手机号码不合法",trigger:"blur"}],password:[{required:!0,validator:i("detailForm","detail","second_password"),trigger:"blur"}],second_password:[{required:!0,validator:a("detail","password"),trigger:"blur"}]},showUpload:!1}},methods:{validate:function(e){var t=this;return new s.a(function(i,a){t.$refs[e].validate(function(e){e?i():a()})})},encryptPass:function(e){var t=this,i=new JSEncrypt;return i.setPublicKey(t.publicKey),i.encrypt(e)},filterData:function(e){return e.roleIds=(e.roleList||[]).map(function(e){return e.id}).join(","),e.password=this.encryptPass(e.password),delete e.second_password,delete e.permissionList,delete e.roleList,e},create:function(){var e=this,t=this;t.validate("detailForm").then(function(){var i=o()({},t.detail);delete i.id,i=t.filterData(i),t.$store.dispatch("CreateUser",i).then(function(){e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.$emit("submit")},function(){})},function(){})},update:function(){var e=this,t=this;t.validate("detailForm").then(function(){var i=o()({},t.detail);i=t.filterData(i),t.$store.dispatch("UpdateUserDetail",i).then(function(){t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),e.$emit("submit")},function(){})},function(){})},updateSelf:function(){var e=this,t=this;t.validate("detailForm").then(function(){var i=o()({},t.detail);i=t.filterData(i),delete i.name,delete i.locked,delete i.roleIds,t.$store.dispatch("UpdateSelf",i).then(function(){t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),e.$emit("submit")},function(){})},function(){})},cancel:function(){this.$emit("cancel")},handleDelRelation:function(e){var t=e.id;this.detail.roleList=this.detail.roleList.filter(function(e){return e.id!==t})},handleAddRelation:function(e){this.detail.roleList.push(e)},showPass:function(){this.passVisible=!0,this.$refs.passForm&&this.$refs.passForm.resetFields()},closePass:function(){this.passVisible=!1,this.$refs.passForm&&this.$refs.passForm.resetFields()},updatePass:function(){this.detail.password=this.pass.val1,this.closePass()},initCaptcha:function(){var e=this;e.$store.dispatch("GetPublicKey").then(function(t){e.publicKey=t})}},created:function(){this.initCaptcha()},watch:{$route:function(){this.captchaObj=null,this.initCaptcha()},dialogFormVisible:function(){this.$refs.detailForm&&this.$refs.detailForm.resetFields()}}}},XZjl:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("//Fk"),o=i.n(a),r=i("fZjL"),s=i.n(r),n=i("pFYg"),p=i.n(n),c=i("woOf"),l=i.n(c),u=i("ziqK"),d=i("4aCt"),v=i("4zLm"),g=i("pkk9");t.default={props:{field:{type:String,default:"avatar"},ki:{default:0},value:{default:!0},url:{type:String,default:""},params:{type:Object,default:null},headers:{type:Object,default:null},width:{type:Number,default:200},height:{type:Number,default:200},noCircle:{type:Boolean,default:!1},maxSize:{type:Number,default:10240},langType:{type:String,default:"zh"},langExt:{type:Object,default:null},imgFormat:{type:String,default:"png"}},data:function(){var e=this,t=e.imgFormat,i=e.langType,a=e.langExt,o=e.width,r=e.height,s=!0,n=["jpg","png"],p=-1===n.indexOf(t)?"jpg":t,c=u.a[i]?u.a[i]:u.a.en,v=d.a[p];return e.imgFormat=p,a&&l()(c,a),"function"!=typeof FormData&&(s=!1),{mime:v,lang:c,isSupported:s,isSupportTouch:document.hasOwnProperty("ontouchstart"),step:1,loading:0,progress:0,hasError:!1,errorMsg:"",ratio:o/r,sourceImg:null,sourceImgUrl:"",createImgUrl:"",sourceImgMouseDown:{on:!1,mX:0,mY:0,x:0,y:0},previewContainer:{width:100,height:100},sourceImgContainer:{width:240,height:180},scale:{zoomAddOn:!1,zoomSubOn:!1,range:1,x:0,y:0,width:0,height:0,maxWidth:0,maxHeight:0,minWidth:0,minHeight:0,naturalWidth:0,naturalHeight:0}}},computed:{progressStyle:function(){return{width:this.progress+"%"}},sourceImgStyle:function(){var e=this.scale,t=this.sourceImgMasking;return{top:e.y+t.y+"px",left:e.x+t.x+"px",width:e.width+"px",height:e.height+"px"}},sourceImgMasking:function(){var e=this.width,t=this.height,i=this.ratio,a=this.sourceImgContainer,o=a,r=o.width/o.height,s=0,n=0,p=o.width,c=o.height,l=1;return i<r&&(l=o.height/t,p=o.height*i,s=(o.width-p)/2),i>r&&(l=o.width/e,c=o.width/i,n=(o.height-c)/2),{scale:l,x:s,y:n,width:p,height:c}},sourceImgShadeStyle:function(){var e=this.sourceImgMasking,t=this.sourceImgContainer,i=t,a=e;return{width:(a.width==i.width?a.width:(i.width-a.width)/2)+"px",height:(a.height==i.height?a.height:(i.height-a.height)/2)+"px"}},previewStyle:function(){var e=(this.width,this.height,this.ratio),t=this.previewContainer,i=t,a=i.width,o=i.height,r=a/o;return e<r&&(a=i.height*e),e>r&&(o=i.width/e),{width:a+"px",height:o+"px"}}},watch:{value:function(e){e&&1!=this.loading&&this.reset()}},methods:{ripple:function(e){i.i(g.a)(e)},off:function(){var e=this;setTimeout(function(){e.$emit("input",!1),3==e.step&&2==e.loading&&e.setStep(1)},200)},setStep:function(e){var t=this;setTimeout(function(){t.step=e},200)},preventDefault:function(e){return e.preventDefault(),!1},handleClick:function(e){1!==this.loading&&e.target!==this.$refs.fileinput&&(e.preventDefault(),document.activeElement!==this.$refs&&this.$refs.fileinput.click())},handleChange:function(e){if(e.preventDefault(),1!==this.loading){var t=e.target.files||e.dataTransfer.files;this.reset(),this.checkFile(t[0])&&this.setSourceImg(t[0])}},checkFile:function(e){var t=this,i=t.lang,a=t.maxSize;return-1===e.type.indexOf("image")?(t.hasError=!0,t.errorMsg=i.error.onlyImg,!1):!(e.size/1024>a)||(t.hasError=!0,t.errorMsg=i.error.outOfSize+a+"kb",!1)},reset:function(){var e=this;e.loading=0,e.hasError=!1,e.errorMsg="",e.progress=0},setSourceImg:function(e){var t=this,i=new FileReader;i.onload=function(e){t.sourceImgUrl=i.result,t.startCrop()},i.readAsDataURL(e)},startCrop:function(){var e=this,t=e.width,i=e.height,a=e.ratio,o=e.scale,r=e.sourceImgUrl,s=e.sourceImgMasking,n=e.lang,p=s,c=new Image;c.src=r,c.onload=function(){var r=c.naturalWidth,s=c.naturalHeight,l=r/s,u=p.width,d=p.height,v=0,g=0;if(r<t||s<i)return e.hasError=!0,e.errorMsg=n.error.lowestPx+t+"*"+i,!1;a>l&&(d=u/l,g=(p.height-d)/2),a<l&&(u=d*l,v=(p.width-u)/2),o.range=0,o.x=v,o.y=g,o.width=u,o.height=d,o.minWidth=u,o.minHeight=d,o.maxWidth=r*p.scale,o.maxHeight=s*p.scale,o.naturalWidth=r,o.naturalHeight=s,e.sourceImg=c,e.createImg(),e.setStep(2)}},imgStartMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,i=this.sourceImgMouseDown,a=this.scale,o=i;o.mX=t.screenX,o.mY=t.screenY,o.x=a.x,o.y=a.y,o.on=!0},imgMove:function(e){if(e.preventDefault(),this.isSupportTouch&&!e.targetTouches)return!1;var t=e.targetTouches?e.targetTouches[0]:e,i=this.sourceImgMouseDown,a=i.on,o=i.mX,r=i.mY,s=i.x,n=i.y,p=this.scale,c=this.sourceImgMasking,l=c,u=t.screenX,d=t.screenY,v=u-o,g=d-r,h=s+v,m=n+g;a&&(h>0&&(h=0),m>0&&(m=0),h<l.width-p.width&&(h=l.width-p.width),m<l.height-p.height&&(m=l.height-p.height),p.x=h,p.y=m)},startZoomAdd:function(e){function t(){if(a.zoomAddOn){var e=a.range>=100?100:++a.range;i.zoomImg(e),setTimeout(function(){t()},60)}}var i=this,a=i.scale;a.zoomAddOn=!0,t()},endZoomAdd:function(e){this.scale.zoomAddOn=!1},startZoomSub:function(e){function t(){if(a.zoomSubOn){var e=a.range<=0?0:--a.range;i.zoomImg(e),setTimeout(function(){t()},60)}}var i=this,a=i.scale;a.zoomSubOn=!0,t()},endZoomSub:function(e){this.scale.zoomSubOn=!1},zoomChange:function(e){this.zoomImg(e.target.value)},zoomImg:function(e){var t=this,i=this.sourceImgMasking,a=(this.sourceImgMouseDown,this.scale),o=a.maxWidth,r=a.maxHeight,s=a.minWidth,n=a.minHeight,p=a.width,c=a.height,l=a.x,u=a.y,d=(a.range,i),v=d.width,g=d.height,h=s+(o-s)*e/100,m=n+(r-n)*e/100,f=v/2-h/p*(v/2-l),b=g/2-m/c*(g/2-u);f>0&&(f=0),b>0&&(b=0),f<v-h&&(f=v-h),b<g-m&&(b=g-m),a.x=f,a.y=b,a.width=h,a.height=m,a.range=e,setTimeout(function(){a.range==e&&t.createImg()},300)},createImg:function(e){var t=this,i=t.mime,a=t.sourceImg,o=t.scale,r=o.x,s=o.y,n=o.width,p=o.height,c=t.sourceImgMasking.scale,l=t.$refs.canvas,u=l.getContext("2d");e&&(t.sourceImgMouseDown.on=!1),u.clearRect(0,0,t.width,t.height),u.drawImage(a,r/c,s/c,n/c,p/c),t.createImgUrl=l.toDataURL(i)},prepareUpload:function(){var e=this.url,t=this.createImgUrl,i=this.field,a=this.ki;this.$emit("crop-success",t,i,a),"string"==typeof e&&e?this.upload():this.off()},upload:function(){var e=this,t=this.lang,a=this.imgFormat,r=this.mime,n=this.url,c=this.params,l=this.headers,u=this.field,d=this.ki,g=this.createImgUrl,h=new FormData;h.append(u,i.i(v.a)(g,r),u+"."+a),"object"==(void 0===c?"undefined":p()(c))&&c&&s()(c).forEach(function(e){h.append(e,c[e])});var m=function(t){t.lengthComputable&&(e.progress=100*Math.round(t.loaded)/t.total)};e.reset(),e.loading=1,e.setStep(3),new o.a(function(e,t){var i=new XMLHttpRequest;i.open("POST",n,!0),i.onreadystatechange=function(){if(4===this.readyState)if(200===this.status||201===this.status){var i=JSON.parse(this.responseText);if(1===i.status)return e(i);if(4===i.status)return t(i)}else t(this.status)},i.upload.progress=m,"object"==(void 0===l?"undefined":p()(l))&&l&&s()(l).forEach(function(e){i.setRequestHeader(e,l[e])}),i.send(h)}).then(function(t){e.value&&(e.loading=2,e.$emit("crop-upload-success",t,u,d))},function(i){e.value&&(e.loading=3,e.hasError=!0,e.errorMsg=t.fail,e.$emit("crop-upload-fail",i,u,d))})}}}},"a+Xf":function(e,t,i){function a(e){i("pNRk")}var o=i("VU/8")(i("XZjl"),i("BIbF"),a,null,null);e.exports=o.exports},dLvm:function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,'@-webkit-keyframes vicp_progress{0%{background-position-y:0}to{background-position-y:40px}}@keyframes vicp_progress{0%{background-position-y:0}to{background-position-y:40px}}@-webkit-keyframes vicp{0%{opacity:0;-webkit-transform:scale(0) translatey(-60px);transform:scale(0) translatey(-60px)}to{opacity:1;-webkit-transform:scale(1) translatey(0);transform:scale(1) translatey(0)}}@keyframes vicp{0%{opacity:0;-webkit-transform:scale(0) translatey(-60px);transform:scale(0) translatey(-60px)}to{opacity:1;-webkit-transform:scale(1) translatey(0);transform:scale(1) translatey(0)}}.vue-image-crop-upload{width:100%;height:100%;background-color:rgba(0,0,0,.65);-webkit-tap-highlight-color:transparent;-moz-tap-highlight-color:transparent}.vue-image-crop-upload,.vue-image-crop-upload .vicp-wrap{position:fixed;display:block;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:10000;top:0;bottom:0;left:0;right:0}.vue-image-crop-upload .vicp-wrap{-webkit-box-shadow:0 1px 3px 0 rgba(0,0,0,.23);box-shadow:0 1px 3px 0 rgba(0,0,0,.23);margin:auto;width:600px;height:330px;padding:25px;background-color:#fff;border-radius:2px;-webkit-animation:vicp .12s ease-in;animation:vicp .12s ease-in}.vue-image-crop-upload .vicp-wrap .vicp-close{position:absolute;right:-30px;top:-30px}.vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4{position:relative;display:block;width:30px;height:30px;cursor:pointer;-webkit-transition:-webkit-transform .18s;transition:-webkit-transform .18s;transition:transform .18s;transition:transform .18s,-webkit-transform .18s;-webkit-transform:rotate(0);transform:rotate(0)}.vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4:after,.vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4:before{-webkit-box-shadow:0 1px 3px 0 rgba(0,0,0,.23);box-shadow:0 1px 3px 0 rgba(0,0,0,.23);content:"";position:absolute;top:12px;left:4px;width:20px;height:3px;-webkit-transform:rotate(45deg);transform:rotate(45deg);background-color:#fff}.vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4:after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.vue-image-crop-upload .vicp-wrap .vicp-close .vicp-icon4:hover{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;padding:35px;height:170px;background-color:rgba(0,0,0,.03);text-align:center;border:1px dashed rgba(0,0,0,.08);overflow:hidden}.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-icon1{display:block;margin:0 auto 6px;width:42px;height:42px;overflow:hidden}.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-icon1 .vicp-icon1-arrow{display:block;margin:0 auto;width:0;height:0;border-bottom:14.7px solid rgba(0,0,0,.3);border-left:14.7px solid transparent;border-right:14.7px solid transparent}.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-icon1 .vicp-icon1-body{display:block;width:12.6px;height:14.7px;margin:0 auto;background-color:rgba(0,0,0,.3)}.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-icon1 .vicp-icon1-bottom{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;height:12.6px;border:6px solid rgba(0,0,0,.3);border-top:none}.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-hint{display:block;padding:15px;font-size:14px;color:#666;line-height:30px}.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area .vicp-no-supported-hint{display:block;position:absolute;top:0;left:0;padding:30px;width:100%;height:60px;line-height:30px;background-color:#eee;text-align:center;color:#666;font-size:14px}.vue-image-crop-upload .vicp-wrap .vicp-step1 .vicp-drop-area:hover{cursor:pointer;border-color:rgba(0,0,0,.1);background-color:rgba(0,0,0,.05)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop{overflow:hidden}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left{float:left}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-img-container{position:relative;display:block;width:240px;height:180px;background-color:#e5e5e0;overflow:hidden}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-img-container .vicp-img{position:absolute;display:block;cursor:move;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-img-container .vicp-img-shade{-webkit-box-shadow:0 2px 6px 0 rgba(0,0,0,.18);box-shadow:0 2px 6px 0 rgba(0,0,0,.18);position:absolute;background-color:hsla(210,8%,95%,.8)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-img-container .vicp-img-shade.vicp-img-shade-1{top:0;left:0}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-img-container .vicp-img-shade.vicp-img-shade-2{bottom:0;right:0}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range{position:relative;margin:30px 0;width:240px;height:18px}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon5,.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon6{position:absolute;top:0;width:18px;height:18px;border-radius:100%;background-color:rgba(0,0,0,.08)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon5:hover,.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon6:hover{-webkit-box-shadow:0 1px 3px 0 rgba(0,0,0,.12);box-shadow:0 1px 3px 0 rgba(0,0,0,.12);cursor:pointer;background-color:rgba(0,0,0,.14)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon5{left:0}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon5:before{position:absolute;content:"";display:block;left:3px;top:8px;width:12px;height:2px;background-color:#fff}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon6{right:0}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon6:before{position:absolute;content:"";display:block;left:3px;top:8px;width:12px;height:2px;background-color:#fff}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range .vicp-icon6:after{position:absolute;content:"";display:block;top:3px;left:8px;width:2px;height:12px;background-color:#fff}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]{display:block;padding-top:5px;margin:0 auto;width:180px;height:8px;vertical-align:top;background:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:focus{outline:none}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-webkit-slider-thumb{-webkit-box-shadow:0 2px 6px 0 rgba(0,0,0,.18);box-shadow:0 2px 6px 0 rgba(0,0,0,.18);-webkit-appearance:none;appearance:none;margin-top:-3px;width:12px;height:12px;background-color:#61c091;border-radius:100%;border:none;-webkit-transition:.2s;transition:.2s}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-moz-range-thumb{box-shadow:0 2px 6px 0 rgba(0,0,0,.18);-moz-appearance:none;appearance:none;width:12px;height:12px;background-color:#61c091;border-radius:100%;border:none;-webkit-transition:.2s;transition:.2s}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-ms-thumb{box-shadow:0 2px 6px 0 rgba(0,0,0,.18);appearance:none;width:12px;height:12px;background-color:#61c091;border:none;border-radius:100%;-webkit-transition:.2s;transition:.2s}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 3px 0 rgba(0,0,0,.23);width:14px;height:14px}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:active::-ms-thumb{box-shadow:0 1px 3px 0 rgba(0,0,0,.23);width:14px;height:14px}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:active::-webkit-slider-thumb{-webkit-box-shadow:0 1px 3px 0 rgba(0,0,0,.23);box-shadow:0 1px 3px 0 rgba(0,0,0,.23);margin-top:-4px;width:14px;height:14px}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-webkit-slider-runnable-track{-webkit-box-shadow:0 1px 3px 0 rgba(0,0,0,.12);box-shadow:0 1px 3px 0 rgba(0,0,0,.12);width:100%;height:6px;cursor:pointer;border-radius:2px;border:none;background-color:rgba(68,170,119,.3)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-moz-range-track{box-shadow:0 1px 3px 0 rgba(0,0,0,.12);width:100%;height:6px;cursor:pointer;border-radius:2px;border:none;background-color:rgba(68,170,119,.3)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-ms-track{box-shadow:0 1px 3px 0 rgba(0,0,0,.12);width:100%;cursor:pointer;background:transparent;border-color:transparent;color:transparent;height:6px;border-radius:2px;border:none}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-ms-fill-lower{background-color:rgba(68,170,119,.3)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]::-ms-fill-upper{background-color:rgba(68,170,119,.15)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:focus::-webkit-slider-runnable-track{background-color:rgba(68,170,119,.5)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:focus::-moz-range-track{background-color:rgba(68,170,119,.5)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:focus::-ms-fill-lower{background-color:rgba(68,170,119,.45)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-left .vicp-range input[type=range]:focus::-ms-fill-upper{background-color:rgba(68,170,119,.25)}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right{float:right}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview{height:150px;overflow:hidden}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview .vicp-preview-item{position:relative;padding:5px;width:100px;height:100px;float:left;margin-right:16px}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview .vicp-preview-item span{position:absolute;bottom:-30px;width:100%;font-size:14px;color:#bbb;display:block;text-align:center}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview .vicp-preview-item img{position:absolute;display:block;top:0;bottom:0;left:0;right:0;margin:auto;padding:3px;background-color:#fff;border:1px solid rgba(0,0,0,.15);overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview .vicp-preview-item:last-child{margin-right:0}.vue-image-crop-upload .vicp-wrap .vicp-step2 .vicp-crop .vicp-crop-right .vicp-preview .vicp-preview-item:last-child img{border-radius:100%}.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;padding:35px;height:170px;background-color:rgba(0,0,0,.03);text-align:center;border:1px dashed #ddd}.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-loading{display:block;padding:15px;font-size:16px;color:#999;line-height:30px}.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-progress-wrap{margin-top:12px;background-color:rgba(0,0,0,.08);border-radius:3px}.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-progress-wrap .vicp-progress{position:relative;display:block;height:5px;border-radius:3px;background-color:#4a7;-webkit-box-shadow:0 2px 6px 0 rgba(68,170,119,.3);box-shadow:0 2px 6px 0 rgba(68,170,119,.3);-webkit-transition:width .15s linear;transition:width .15s linear;background-image:linear-gradient(-45deg,hsla(0,0%,100%,.2) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.2) 0,hsla(0,0%,100%,.2) 75%,transparent 0,transparent);background-size:40px 40px;-webkit-animation:vicp_progress .5s linear infinite;animation:vicp_progress .5s linear infinite}.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-progress-wrap .vicp-progress:after{content:"";position:absolute;display:block;top:-3px;right:-3px;width:9px;height:9px;border:1px solid rgba(245,246,247,.7);-webkit-box-shadow:0 1px 4px 0 rgba(68,170,119,.7);box-shadow:0 1px 4px 0 rgba(68,170,119,.7);border-radius:100%;background-color:#4a7}.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-error,.vue-image-crop-upload .vicp-wrap .vicp-step3 .vicp-upload .vicp-success{height:100px;line-height:100px}.vue-image-crop-upload .vicp-wrap .vicp-operate{position:absolute;right:20px;bottom:20px}.vue-image-crop-upload .vicp-wrap .vicp-operate a{position:relative;float:left;display:block;margin-left:10px;width:100px;height:36px;line-height:36px;text-align:center;cursor:pointer;font-size:14px;color:#4a7;border-radius:2px;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vue-image-crop-upload .vicp-wrap .vicp-operate a:hover{background-color:rgba(0,0,0,.03)}.vue-image-crop-upload .vicp-wrap .vicp-error,.vue-image-crop-upload .vicp-wrap .vicp-success{display:block;font-size:14px;line-height:24px;height:24px;color:#d10;text-align:center;vertical-align:top}.vue-image-crop-upload .vicp-wrap .vicp-success{color:#4a7}.vue-image-crop-upload .vicp-wrap .vicp-icon3{position:relative;display:inline-block;width:20px;height:20px;top:4px}.vue-image-crop-upload .vicp-wrap .vicp-icon3:after{position:absolute;top:3px;left:6px;width:6px;height:10px;border-width:0 2px 2px 0;border-color:#4a7;border-style:solid;-webkit-transform:rotate(45deg);transform:rotate(45deg);content:""}.vue-image-crop-upload .vicp-wrap .vicp-icon2{position:relative;display:inline-block;width:20px;height:20px;top:4px}.vue-image-crop-upload .vicp-wrap .vicp-icon2:after,.vue-image-crop-upload .vicp-wrap .vicp-icon2:before{content:"";position:absolute;top:9px;left:4px;width:13px;height:2px;background-color:#d10;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.vue-image-crop-upload .vicp-wrap .vicp-icon2:after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.e-ripple{position:absolute;border-radius:100%;background-color:rgba(0,0,0,.15);background-clip:padding-box;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transform:scale(0);transform:scale(0);opacity:1}.e-ripple.z-active{opacity:0;-webkit-transform:scale(2);transform:scale(2);-webkit-transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,-webkit-transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out;transition:opacity 1.2s ease-out,transform .6s ease-out,-webkit-transform .6s ease-out}',""])},e5Cf:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,"before-close":e.cancel,size:"full"}},[i("el-form",{ref:"detailForm",staticClass:"small-space",staticStyle:{width:"900px","margin-left":"50px"},attrs:{model:e.detail,rules:e.detailRules,"label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[i("el-input",{model:{value:e.detail.name,callback:function(t){e.detail.name=t},expression:"detail.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.detail.description,callback:function(t){e.detail.description=t},expression:"detail.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"关联权限"}},[0===e.detail.permissionList.length?i("span",[e._v("无关联角色")]):e._l(e.detail.permissionList,function(t){return i("el-tooltip",{key:t.id,attrs:{content:t.description,placement:"top"}},[i("el-tag",{attrs:{type:"success",closable:"create"==e.dialogStatus||e.checkPermission(e.permissionConstant.role_u)&&"update"===e.dialogStatus,"close-transition":!1},on:{close:function(i){e.handleDelRelation(t)}}},[e._v("\n          "+e._s(t.name)+"\n        ")])],1)})],2),e._v(" "),"create"==e.dialogStatus||e.checkPermission(e.permissionConstant.role_u)&&"update"===e.dialogStatus?i("el-form-item",{attrs:{label:"选择关联权限"}},[i("Permissions",{attrs:{permissions:e.detail.permissionList},on:{check:e.handleAddRelation,"cancel-check":e.handleDelRelation}})],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("确 定")]):e._e(),e._v(" "),"update"==e.dialogStatus&&e.checkPermission(e.permissionConstant.role_u)?[i("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])]:e._e()],2)],1)},staticRenderFns:[]}},nUWv:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:[e.containerClass]},[i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.crpPermissions.records,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{width:"110",align:"center",label:"权限名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"110",align:"center",label:"权限编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"250px",align:"center",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.description))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.has(t.row.code)?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){e.cancelCheck(t.row)}}},[e._v("取消选中")]):i("el-button",{attrs:{size:"small"},on:{click:function(i){e.check(t.row)}}},[e._v("选中")])]}}])})],1)],1)},staticRenderFns:[]}},pNRk:function(e,t,i){var a=i("dLvm");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("rjj0")("7c1b73bc",a,!0)},pkk9:function(e,t,i){"use strict";var a=i("woOf"),o=i.n(a);t.a=function(e,t){var i=o()({ele:e.target,type:"hit",bgc:"rgba(0, 0, 0, 0.15)"},t),a=i.ele;if(a){var r=a.getBoundingClientRect(),s=a.querySelector(".e-ripple");switch(s?s.className="e-ripple":(s=document.createElement("span"),s.className="e-ripple",s.style.height=s.style.width=Math.max(r.width,r.height)+"px",a.appendChild(s)),i.type){case"center":s.style.top=r.height/2-s.offsetHeight/2+"px",s.style.left=r.width/2-s.offsetWidth/2+"px";break;default:s.style.top=e.pageY-r.top-s.offsetHeight/2-document.body.scrollTop+"px",s.style.left=e.pageX-r.left-s.offsetWidth/2-document.body.scrollLeft+"px"}return s.style.backgroundColor=i.bgc,s.className="e-ripple z-active",!1}}},qRdb:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),o=i.n(a),r=i("woOf"),s=i.n(r),n=i("NYxO"),p=i("MhD1"),c=i.n(p),l={id:"",name:"",description:"",permissionList:[],permissionListStr:""};t.default={components:{RoleDetail:c.a},props:{containerClass:{type:String,default:""},isMain:{type:Boolean,default:!0},roles:{type:Array,default:function(){return[]}}},name:"crp_role",data:function(){return{selections:[],listLoading:!0,textMap:{update:"编辑",create:"创建"},listQuery:{targetPage:1,pageSize:10,keyword:void 0},temp:s()({},l),dialogFormVisible:!1,dialogStatus:"",tableKey:0}},computed:o()({},i.i(n.a)(["crpRoles"])),created:function(){this.getList()},filters:{statusFilter:function(e){return!1===e?"有效":"冻结"}},methods:{getList:function(){var e=this;this.listLoading=!0,this.$store.dispatch("GetAllRole",this.listQuery).then(function(){e.listLoading=!1},function(){})},handleFilter:function(){this.getList()},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.targetPage=e,this.getList()},handleBatchDelete:function(){if(0===this.selections.length)return void this.$message({message:"请选择要删除的权限",type:"warning"});var e=this.selections.map(function(e){return e.id});this.delete(e,"确认批量删除权限？")},handleModifyStatus:function(e){this.delete([e.id],"确认删除权限："+e.name+"？")},delete:function(e,t){var i=this;this.$confirm(t).then(function(){i.$store.dispatch("DelRole",{ids:e}).then(function(){i.$message({message:"操作成功",type:"success"}),i.getList()})},function(){})},handleCreate:function(){this.dialogStatus="create",this.dialogFormVisible=!0},handleUpdate:function(e){var t=this;this.$store.dispatch("GetRoleDetail",e.id).then(function(e){t.temp=s()({},e),t.temp.permissionList=e.permissionList||[]}),this.dialogStatus="update",this.dialogFormVisible=!0},submit:function(){this.dialogFormVisible=!1,this.getList(),this.temp=s()({},l)},cancel:function(){this.dialogFormVisible=!1,this.temp=s()({},l)},check:function(e){this.$emit("check",e)},cancelCheck:function(e){this.$emit("cancel-check",e)},has:function(e){return this.roles.some(function(t){return t.id===e})},handleSelectionChange:function(e){this.selections=e}}}},uq7Z:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),o=i.n(a),r=i("//Fk"),s=i.n(r),n=i("RpGP"),p=i.n(n);t.default={components:{Permissions:p.a},props:{dialogStatus:{type:String,default:"create"},dialogFormVisible:{type:Boolean,default:!1},detail:{type:Object,default:function(){return{id:"",name:"",description:"",permissionList:[],permissionListStr:""}}}},data:function(){return{isMain:!1,textMap:{update:"编辑",create:"创建"},detailRules:{name:[{required:!0,message:"角色名称不能为空",trigger:"blur"},{min:3,max:10,message:"角色名称长度3到10位",trigger:"blur"}]}}},methods:{validate:function(){var e=this;return new s.a(function(t,i){e.$refs.detailForm.validate(function(e){e?t():i()})})},filterData:function(e){return e.permissionListStr=e.permissionList.map(function(e){return e.code}).join(","),delete e.permissionList,e},create:function(){var e=this,t=this;t.validate().then(function(){var i=o()({},t.detail);delete i.id,i=t.filterData(i),t.$store.dispatch("CreateRole",i).then(function(){e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.$emit("submit")},function(){})},function(){})},update:function(){var e=this,t=this;t.validate().then(function(){var i=o()({},t.detail);i=t.filterData(i),t.$store.dispatch("UpdateRoleDetail",i).then(function(){t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),e.$emit("submit")},function(){})},function(){})},cancel:function(){this.$emit("cancel")},handleDelRelation:function(e){var t=e.code;this.detail.permissionList=this.detail.permissionList.filter(function(e){return e.code!==t})},handleAddRelation:function(e){this.detail.permissionList.push(e)}},watch:{dialogFormVisible:function(){this.$refs.detailForm&&this.$refs.detailForm.resetFields()}}}},zeOH:function(e,t,i){var a=i("VU/8")(i("qRdb"),i("2hCC"),null,null,null);e.exports=a.exports},ziqK:function(e,t,i){"use strict";t.a={zh:{hint:"点击，或拖动图片至此处",loading:"正在上传……",noSupported:"浏览器不支持该功能，请使用IE10以上或其他现在浏览器！",success:"上传成功",fail:"图片上传失败",preview:"头像预览",btn:{off:"取消",close:"关闭",back:"上一步",save:"保存"},error:{onlyImg:"仅限图片格式",outOfSize:"单文件大小不能超过 ",lowestPx:"图片最低像素为（宽*高）："}},en:{hint:"Click or drag the file here to upload",loading:"Uploading…",noSupported:"Browser is not supported, please use IE10+ or other browsers",success:"Upload success",fail:"Upload failed",preview:"Preview",btn:{off:"Cancel",close:"Close",back:"Back",save:"Save"},error:{onlyImg:"Image only",outOfSize:"Image exceeds size limit: ",lowestPx:"Image's size is too low. Expected at least: "}},ro:{hint:"Atinge sau trage fișierul aici",loading:"Se încarcă",noSupported:"Browser-ul tău nu suportă acest feature. Te rugăm încearcă cu alt browser.",success:"S-a încărcat cu succes",fail:"A apărut o problemă la încărcare",preview:"Previzualizează",btn:{off:"Anulează",close:"Închide",back:"Înapoi",save:"Salvează"},error:{onlyImg:"Doar imagini",outOfSize:"Imaginea depășește limita de: ",loewstPx:"Imaginea este prea mică; Minim: "}},ru:{hint:"Нажмите, или перетащите файл в это окно",loading:"Загружаю……",noSupported:"Ваш браузер не поддерживается, пожалуйста, используйте IE10 + или другие браузеры",success:"Загрузка выполнена успешно",fail:"Ошибка загрузки",preview:"Предпросмотр",btn:{off:"Отменить",close:"Закрыть",back:"Назад",save:"Сохранить"},error:{onlyImg:"Только изображения",outOfSize:"Изображение превышает предельный размер: ",lowestPx:"Минимальный размер изображения: "}},"pt-br":{hint:"Clique ou arraste o arquivo aqui para carregar",loading:"Carregando…",noSupported:"Browser não suportado, use o IE10+ ou outro browser",success:"Sucesso ao carregar imagem",fail:"Falha ao carregar imagem",preview:"Pré-visualizar",btn:{off:"Cancelar",close:"Fechar",back:"Voltar",save:"Salvar"},error:{onlyImg:"Apenas imagens",outOfSize:"A imagem excede o limite de tamanho: ",lowestPx:"O tamanho da imagem é muito pequeno. Tamanho mínimo: "}},fr:{hint:"Cliquez ou glissez le fichier ici.",loading:"Téléchargement…",noSupported:"Votre navigateur n'est pas supporté. Utilisez IE10 + ou un autre navigateur s'il vous plaît.",success:"Téléchargement réussit",fail:"Téléchargement echoué",preview:"Aperçu",btn:{off:"Annuler",close:"Fermer",back:"Retour",save:"Enregistrer"},error:{onlyImg:"Image uniquement",outOfSize:"L'image sélectionnée dépasse la taille maximum: ",lowestPx:"L'image sélectionnée est trop petite. Dimensions attendues: "}}}}});